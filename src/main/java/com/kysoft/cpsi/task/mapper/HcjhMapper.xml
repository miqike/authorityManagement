<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kysoft.cpsi.task.mapper.HcjhMapper">
    <resultMap id="BaseResultMap" type="com.kysoft.cpsi.task.entity.Hcjh">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        <id column="ID" jdbcType="VARCHAR" property="id"/>
        <result column="ND" jdbcType="NUMERIC" property="nd"/>
        <result column="JHMC" jdbcType="VARCHAR" property="jhmc"/>
        <result column="GSJHBH" jdbcType="VARCHAR" property="gsjhbh"/>
        <result column="FL" jdbcType="NUMERIC" property="fl"/>
        <result column="XDRQ" jdbcType="TIMESTAMP" property="xdrq"/>
        <result column="YQWCSJ" jdbcType="TIMESTAMP" property="yqwcsj"/>
        <result column="HCRWSL" jdbcType="NUMERIC" property="hcrwsl"/>
        <result column="YPFSL" jdbcType="NUMERIC" property="ypfsl"/>
        <result column="YRLSL" jdbcType="NUMERIC" property="yrlsl"/>
        <result column="WRLSL" jdbcType="NUMERIC" property="wrlsl"/>
        <result column="SHR" jdbcType="VARCHAR" property="shr"/>
        <result column="SHZT" jdbcType="NUMERIC" property="shzt"/>
        <result column="XDR" jdbcType="VARCHAR" property="xdr"/>
        <result column="SM" jdbcType="VARCHAR" property="sm"/>
        <result column="NR" jdbcType="NUMERIC" property="nr"/>
        <result column="XDRMC" jdbcType="VARCHAR" property="xdrmc"/>
        <result column="SHRMC" jdbcType="VARCHAR" property="shrmc"/>
        <result column="JHBH" jdbcType="VARCHAR" property="jhbh"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        ID, ND, JHMC, GSJHBH, FL, XDRQ, YQWCSJ, HCRWSL, YPFSL, YRLSL, WRLSL, SHR, SHZT, XDR,
        SM, NR, XDRMC, SHRMC, JHBH
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        select 'false' as QUERYID,
        <include refid="Base_Column_List"/>
        from T_HCJH
        where ID = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        delete from T_HCJH
        where ID = #{id,jdbcType=VARCHAR}
    </delete>
    <insert id="insert" parameterType="com.kysoft.cpsi.task.entity.Hcjh">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        insert into T_HCJH (ID, ND, JHMC,
        GSJHBH, FL, XDRQ,
        YQWCSJ, HCRWSL, YPFSL,
        YRLSL, WRLSL, SHR,
        SHZT, XDR, SM, NR,
        XDRMC, SHRMC, JHBH)
        values (#{id,jdbcType=VARCHAR}, #{nd,jdbcType=NUMERIC}, #{jhmc,jdbcType=VARCHAR},
        #{gsjhbh,jdbcType=VARCHAR}, #{fl,jdbcType=NUMERIC}, #{xdrq,jdbcType=TIMESTAMP},
        #{yqwcsj,jdbcType=TIMESTAMP}, #{hcrwsl,jdbcType=NUMERIC}, #{ypfsl,jdbcType=NUMERIC},
        #{yrlsl,jdbcType=NUMERIC}, #{wrlsl,jdbcType=NUMERIC}, #{shr,jdbcType=VARCHAR},
        #{shzt,jdbcType=NUMERIC}, #{xdr,jdbcType=VARCHAR}, #{sm,jdbcType=VARCHAR}, #{nr,jdbcType=NUMERIC},
        #{xdrmc,jdbcType=VARCHAR}, #{shrmc,jdbcType=VARCHAR}, #{jhbh,jdbcType=VARCHAR})
    </insert>
    <insert id="insertSelective" parameterType="com.kysoft.cpsi.task.entity.Hcjh">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        insert into T_HCJH
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="nd != null">
                ND,
            </if>
            <if test="jhmc != null">
                JHMC,
            </if>
            <if test="gsjhbh != null">
                GSJHBH,
            </if>
            <if test="fl != null">
                FL,
            </if>
            <if test="xdrq != null">
                XDRQ,
            </if>
            <if test="yqwcsj != null">
                YQWCSJ,
            </if>
            <if test="hcrwsl != null">
                HCRWSL,
            </if>
            <if test="ypfsl != null">
                YPFSL,
            </if>
            <if test="yrlsl != null">
                YRLSL,
            </if>
            <if test="wrlsl != null">
                WRLSL,
            </if>
            <if test="shr != null">
                SHR,
            </if>
            <if test="shzt != null">
                SHZT,
            </if>
            <if test="xdr != null">
                XDR,
            </if>
            <if test="sm != null">
                SM,
            </if>
            <if test="nr != null">
                NR,
            </if>
            <if test="xdrmc != null">
                XDRMC,
            </if>
            <if test="shrmc != null">
                SHRMC,
            </if>
            <if test="jhbh != null">
                JHBH,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="nd != null">
                #{nd,jdbcType=NUMERIC},
            </if>
            <if test="jhmc != null">
                #{jhmc,jdbcType=VARCHAR},
            </if>
            <if test="gsjhbh != null">
                #{gsjhbh,jdbcType=VARCHAR},
            </if>
            <if test="fl != null">
                #{fl,jdbcType=NUMERIC},
            </if>
            <if test="xdrq != null">
                #{xdrq,jdbcType=TIMESTAMP},
            </if>
            <if test="yqwcsj != null">
                #{yqwcsj,jdbcType=TIMESTAMP},
            </if>
            <if test="hcrwsl != null">
                #{hcrwsl,jdbcType=NUMERIC},
            </if>
            <if test="ypfsl != null">
                #{ypfsl,jdbcType=NUMERIC},
            </if>
            <if test="yrlsl != null">
                #{yrlsl,jdbcType=NUMERIC},
            </if>
            <if test="wrlsl != null">
                #{wrlsl,jdbcType=NUMERIC},
            </if>
            <if test="shr != null">
                #{shr,jdbcType=VARCHAR},
            </if>
            <if test="shzt != null">
                #{shzt,jdbcType=NUMERIC},
            </if>
            <if test="xdr != null">
                #{xdr,jdbcType=VARCHAR},
            </if>
            <if test="sm != null">
                #{sm,jdbcType=VARCHAR},
            </if>
            <if test="nr != null">
                #{nr,jdbcType=NUMERIC},
            </if>
            <if test="xdrmc != null">
                #{xdrmc,jdbcType=VARCHAR},
            </if>
            <if test="shrmc != null">
                #{shrmc,jdbcType=VARCHAR},
            </if>
            <if test="jhbh != null">
                #{jhbh,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.kysoft.cpsi.task.entity.Hcjh">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        update T_HCJH
        <set>
            <if test="nd != null">
                ND = #{nd,jdbcType=NUMERIC},
            </if>
            <if test="jhmc != null">
                JHMC = #{jhmc,jdbcType=VARCHAR},
            </if>
            <if test="gsjhbh != null">
                GSJHBH = #{gsjhbh,jdbcType=VARCHAR},
            </if>
            <if test="fl != null">
                FL = #{fl,jdbcType=NUMERIC},
            </if>
            <if test="xdrq != null">
                XDRQ = #{xdrq,jdbcType=TIMESTAMP},
            </if>
            <if test="yqwcsj != null">
                YQWCSJ = #{yqwcsj,jdbcType=TIMESTAMP},
            </if>
            <if test="hcrwsl != null">
                HCRWSL = #{hcrwsl,jdbcType=NUMERIC},
            </if>
            <if test="ypfsl != null">
                YPFSL = #{ypfsl,jdbcType=NUMERIC},
            </if>
            <if test="yrlsl != null">
                YRLSL = #{yrlsl,jdbcType=NUMERIC},
            </if>
            <if test="wrlsl != null">
                WRLSL = #{wrlsl,jdbcType=NUMERIC},
            </if>
            <if test="shr != null">
                SHR = #{shr,jdbcType=VARCHAR},
            </if>
            <if test="shzt != null">
                SHZT = #{shzt,jdbcType=NUMERIC},
            </if>
            <if test="xdr != null">
                XDR = #{xdr,jdbcType=VARCHAR},
            </if>
            <if test="sm != null">
                SM = #{sm,jdbcType=VARCHAR},
            </if>
            <if test="nr != null">
                NR = #{nr,jdbcType=NUMERIC},
            </if>
            <if test="xdrmc != null">
                XDRMC = #{xdrmc,jdbcType=VARCHAR},
            </if>
            <if test="shrmc != null">
                SHRMC = #{shrmc,jdbcType=VARCHAR},
            </if>
            <if test="jhbh != null">
                JHBH = #{jhbh,jdbcType=VARCHAR},
            </if>
        </set>
        where ID = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.kysoft.cpsi.task.entity.Hcjh">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu May 26 09:22:37 CST 2016.
        -->
        update T_HCJH
        set ND = #{nd,jdbcType=NUMERIC},
        JHMC = #{jhmc,jdbcType=VARCHAR},
        GSJHBH = #{gsjhbh,jdbcType=VARCHAR},
        FL = #{fl,jdbcType=NUMERIC},
        XDRQ = #{xdrq,jdbcType=TIMESTAMP},
        YQWCSJ = #{yqwcsj,jdbcType=TIMESTAMP},
        HCRWSL = #{hcrwsl,jdbcType=NUMERIC},
        YPFSL = #{ypfsl,jdbcType=NUMERIC},
        YRLSL = #{yrlsl,jdbcType=NUMERIC},
        WRLSL = #{wrlsl,jdbcType=NUMERIC},
        SHR = #{shr,jdbcType=VARCHAR},
        SHZT = #{shzt,jdbcType=NUMERIC},
        XDR = #{xdr,jdbcType=VARCHAR},
        SM = #{sm,jdbcType=VARCHAR},
        NR = #{nr,jdbcType=NUMERIC},
        XDRMC = #{xdrmc,jdbcType=VARCHAR},
        SHRMC = #{shrmc,jdbcType=VARCHAR},
        JHBH = #{jhbh,jdbcType=VARCHAR}
        where ID = #{id,jdbcType=VARCHAR}
    </update>

    <select id="query" resultMap="BaseResultMap">
        select ID, ND, JHMC, GSJHBH, FL, XDRQ, YQWCSJ, HCRWSL, SHR, SHZT, XDR,
        SM, NR, XDRMC, SHRMC, JHBH, YPFSL,YRLSL,WRLSL
        from T_HCJH a
        <where>
            <if test="nd!=null">
                ND = #{nd}
            </if>
            <if test="jhbh!=null">
                AND JHBH = #{jhbh}
            </if>
            <if test="gsjhbh!=null">
                AND GSJHBH = #{gsjhbh}
            </if>
            <if test="jhmc!=null">
                AND JHMC LIKE concat(concat('%', #{jhmc}), '%')
            </if>
            <if test="nr!=null">
                AND NR = #{nr}
            </if>
            <if test="fl!=null">
                AND FL = #{fl}
            </if>
        </where>
        ORDER BY
        <if test="order != null">
            ${sort}
            ${order},
        </if>
        ND
    </select>
<!--     <select id="query" resultMap="BaseResultMap">
        select ID, ND, JHMC, GSJHBH, FL, XDRQ, YQWCSJ, HCRWSL, SHR, SHZT, XDR,
        SM, NR, XDRMC, SHRMC, JHBH,
        (select count(1) from t_hcrw b where b.hcjh_id=a.id and b.rwzt in(1,2)) YPFSL,
        (select count(1) from t_hcrw b where b.hcjh_id=a.id and b.rwzt in(2)) YRLSL,
        (select count(1) from t_hcrw b where b.hcjh_id=a.id and b.rwzt in(1)) WRLSL
        from T_HCJH a
        <where>
            <if test="nd!=null">
                ND = #{nd}
            </if>
            <if test="jhbh!=null">
                AND JHBH = #{jhbh}
            </if>
            <if test="gsjhbh!=null">
                AND GSJHBH = #{gsjhbh}
            </if>
            <if test="jhmc!=null">
                AND 1=1JHMC LIKE concat(concat('%', #{jhmc}), '%')
            </if>
            <if test="nr!=null">
                AND NR = #{nr}
            </if>
            <if test="fl!=null">
                AND FL = #{fl}
            </if>
        </where>
        ORDER BY
        <if test="order != null">
            ${sort}
            ${order},
        </if>
        ND
    </select> -->

    <update id="updateAuditById" parameterType="com.kysoft.cpsi.task.entity.Hcjh">
        update T_HCJH
        set SHZT = #{shzt,jdbcType=NUMERIC},
        SHR = #{userId},
        SHRMC = #{userName}
        where ID = #{hcjhId,jdbcType=VARCHAR}
    </update>

    <select id="testDblink" statementType="CALLABLE" parameterType="java.util.HashMap">
        {
        call prc_testDblink(
        #{hcrws,mode=OUT,jdbcType=INTEGER},
        #{hcrys,mode=OUT,jdbcType=INTEGER}
        )}
    </select>

    <select id="importDblink" statementType="CALLABLE" parameterType="java.util.HashMap">
        {
        call prc_importDblink(
        #{hcjhId,mode=IN,jdbcType=VARCHAR}
        )}
    </select>

	<update id="updateAcceptStatusByPrimaryKey" >
        update T_HCJH
        set YRLSL = #{yrlsl,jdbcType=NUMERIC},
        WRLSL = (HCRWSL - #{yrlsl,jdbcType=NUMERIC})
        where ID = #{hcjhId,jdbcType=VARCHAR}
    </update>
</mapper>