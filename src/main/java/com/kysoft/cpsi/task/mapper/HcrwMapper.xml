<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kysoft.cpsi.task.mapper.HcrwMapper">
  <resultMap id="BaseResultMap" type="com.kysoft.cpsi.task.entity.Hcrw">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="HCJH_ID" jdbcType="VARCHAR" property="hcjhId" />
    <result column="HCDW_XYDM" jdbcType="VARCHAR" property="hcdwXydm" />
    <result column="HCDW_NAME" jdbcType="VARCHAR" property="hcdwName" />
    <result column="ZFRY_CODE1" jdbcType="VARCHAR" property="zfryCode1" />
    <result column="ZFRY_CODE2" jdbcType="VARCHAR" property="zfryCode2" />
    <result column="RWZT" jdbcType="NUMERIC" property="rwzt" />
    <result column="HCFL" jdbcType="NUMERIC" property="hcfl" />
    <result column="HCJG" jdbcType="VARCHAR" property="hcjg" />
    <result column="HCJIEGUO" jdbcType="NUMERIC" property="hcjieguo" />
    <result column="JYZT" jdbcType="NUMERIC" property="jyzt" />
    <result column="HCJGGSQK" jdbcType="NUMERIC" property="hcjggsqk" />
    <result column="RLR" jdbcType="VARCHAR" property="rlr" />
    <result column="RLRQ" jdbcType="TIMESTAMP" property="rlrq" />
    <result column="SJWCRQ" jdbcType="TIMESTAMP" property="sjwcrq" />
    <result column="ZFRY_NAME1" jdbcType="VARCHAR" property="zfryName1" />
    <result column="ZFRY_NAME2" jdbcType="VARCHAR" property="zfryName2" />
    <result column="HCJGMC" jdbcType="VARCHAR" property="hcjgmc" />
    <result column="DJJGMC" jdbcType="VARCHAR" property="djjgmc" />
    <result column="DJJG" jdbcType="VARCHAR" property="djjg" />
    <result column="ZZXS" jdbcType="NUMERIC" property="zzxs" />
    <result column="QYBM" jdbcType="VARCHAR" property="qybm" />
    <result column="QYMC" jdbcType="VARCHAR" property="qymc" />
    <result column="RLRMC" jdbcType="VARCHAR" property="rlrmc" />
    <result column="JHWCRQ" jdbcType="TIMESTAMP" property="jhwcrq" />
    <result column="ND" jdbcType="NUMERIC" property="nd" />
    <result column="JHMC" jdbcType="VARCHAR" property="jhmc" />
    <result column="JHXDRQ" jdbcType="TIMESTAMP" property="jhxdrq" />
    <result column="DATA_LOADED" jdbcType="DECIMAL" property="dataLoaded" />
    <result column="NR" jdbcType="NUMERIC" property="nr" />
    <result column="UPLOAD_FILES" jdbcType="DECIMAL" property="uploadFiles" />
    <result column="JHBH" jdbcType="VARCHAR" property="jhbh" />
    <result column="DOC_READY_FLAG" jdbcType="DECIMAL" property="docReadyFlag" />
    <result column="REPORT_DOC_READY_TIME" jdbcType="TIMESTAMP" property="reportDocReadyTime" />
    <result column="DOC_READY_REPORTER" jdbcType="VARCHAR" property="docReadyReporter" />
    <result column="DOC_READY_REPORT_FLAG" jdbcType="DECIMAL" property="docReadyReportFlag" />
    <result column="REQUIRED_FILES" jdbcType="DECIMAL" property="requiredFiles" />
    <result column="REQUIRED_FILES_FUR" jdbcType="DECIMAL" property="requiredFilesFur" />
    <result column="UPLOAD_FILES_FUR" jdbcType="DECIMAL" property="uploadFilesFur" />
    <result column="DOC_READY_FLAG_FUR" jdbcType="DECIMAL" property="docReadyFlagFur" />
    <result column="PLAN_TYPE" jdbcType="DECIMAL" property="planType" />
    <result column="AUDIT_RESULT" jdbcType="DECIMAL" property="auditResult" />
    <result column="AUDIT_COMMENT" jdbcType="VARCHAR" property="auditComment" />
    <result column="AUDITOR" jdbcType="VARCHAR" property="auditor" />
    <result column="AUDITOR_NAME" jdbcType="VARCHAR" property="auditorName" />
    <result column="AUDIT_TIME" jdbcType="TIMESTAMP" property="auditTime" />
    <result column="FINANCIAL_DATE" jdbcType="TIMESTAMP" property="financialDate" />
    <result column="SELFCHECK_DATE" jdbcType="TIMESTAMP" property="selfcheckDate" />
    <result column="CLRQ" jdbcType="TIMESTAMP" property="clrq" />
    <result column="ZS" jdbcType="VARCHAR" property="zs" />
    <result column="JHND" jdbcType="DECIMAL" property="jhnd" />
    <result column="LRRQ" jdbcType="TIMESTAMP" property="lrrq" />
    <result column="ZTLX" jdbcType="VARCHAR" property="ztlx" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    ID, HCJH_ID, HCDW_XYDM, HCDW_NAME, ZFRY_CODE1, ZFRY_CODE2, RWZT, HCFL, HCJG, HCJIEGUO, 
    JYZT, HCJGGSQK, RLR, RLRQ, SJWCRQ, ZFRY_NAME1, ZFRY_NAME2, HCJGMC, DJJGMC, DJJG, 
    ZZXS, QYBM, QYMC, RLRMC, JHWCRQ, ND, JHMC, JHXDRQ, DATA_LOADED, NR, UPLOAD_FILES, 
    JHBH, DOC_READY_FLAG, REPORT_DOC_READY_TIME, DOC_READY_REPORTER, DOC_READY_REPORT_FLAG, 
    REQUIRED_FILES, REQUIRED_FILES_FUR, UPLOAD_FILES_FUR, DOC_READY_FLAG_FUR, PLAN_TYPE, 
    AUDIT_RESULT, AUDIT_COMMENT, AUDITOR, AUDITOR_NAME, AUDIT_TIME, FINANCIAL_DATE, SELFCHECK_DATE, 
    CLRQ, ZS, JHND, LRRQ, ZTLX
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    select 'false' as QUERYID,
    <include refid="Base_Column_List" />
    from T_HCRW
    where ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    delete from T_HCRW
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.kysoft.cpsi.task.entity.Hcrw">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    insert into T_HCRW (ID, HCJH_ID, HCDW_XYDM, 
      HCDW_NAME, ZFRY_CODE1, ZFRY_CODE2, 
      RWZT, HCFL, HCJG, HCJIEGUO, 
      JYZT, HCJGGSQK, RLR, 
      RLRQ, SJWCRQ, ZFRY_NAME1, 
      ZFRY_NAME2, HCJGMC, DJJGMC, 
      DJJG, ZZXS, QYBM, QYMC, 
      RLRMC, JHWCRQ, ND, 
      JHMC, JHXDRQ, DATA_LOADED, 
      NR, UPLOAD_FILES, JHBH, 
      DOC_READY_FLAG, REPORT_DOC_READY_TIME, DOC_READY_REPORTER, 
      DOC_READY_REPORT_FLAG, REQUIRED_FILES, REQUIRED_FILES_FUR, 
      UPLOAD_FILES_FUR, DOC_READY_FLAG_FUR, PLAN_TYPE, 
      AUDIT_RESULT, AUDIT_COMMENT, AUDITOR, 
      AUDITOR_NAME, AUDIT_TIME, FINANCIAL_DATE, 
      SELFCHECK_DATE, CLRQ, ZS, 
      JHND, LRRQ, ZTLX)
    values (#{id,jdbcType=VARCHAR}, #{hcjhId,jdbcType=VARCHAR}, #{hcdwXydm,jdbcType=VARCHAR}, 
      #{hcdwName,jdbcType=VARCHAR}, #{zfryCode1,jdbcType=VARCHAR}, #{zfryCode2,jdbcType=VARCHAR}, 
      #{rwzt,jdbcType=NUMERIC}, #{hcfl,jdbcType=NUMERIC}, #{hcjg,jdbcType=VARCHAR}, #{hcjieguo,jdbcType=NUMERIC}, 
      #{jyzt,jdbcType=NUMERIC}, #{hcjggsqk,jdbcType=NUMERIC}, #{rlr,jdbcType=VARCHAR}, 
      #{rlrq,jdbcType=TIMESTAMP}, #{sjwcrq,jdbcType=TIMESTAMP}, #{zfryName1,jdbcType=VARCHAR}, 
      #{zfryName2,jdbcType=VARCHAR}, #{hcjgmc,jdbcType=VARCHAR}, #{djjgmc,jdbcType=VARCHAR}, 
      #{djjg,jdbcType=VARCHAR}, #{zzxs,jdbcType=NUMERIC}, #{qybm,jdbcType=VARCHAR}, #{qymc,jdbcType=VARCHAR}, 
      #{rlrmc,jdbcType=VARCHAR}, #{jhwcrq,jdbcType=TIMESTAMP}, #{nd,jdbcType=NUMERIC}, 
      #{jhmc,jdbcType=VARCHAR}, #{jhxdrq,jdbcType=TIMESTAMP}, #{dataLoaded,jdbcType=DECIMAL}, 
      #{nr,jdbcType=NUMERIC}, #{uploadFiles,jdbcType=DECIMAL}, #{jhbh,jdbcType=VARCHAR}, 
      #{docReadyFlag,jdbcType=DECIMAL}, #{reportDocReadyTime,jdbcType=TIMESTAMP}, #{docReadyReporter,jdbcType=VARCHAR}, 
      #{docReadyReportFlag,jdbcType=DECIMAL}, #{requiredFiles,jdbcType=DECIMAL}, #{requiredFilesFur,jdbcType=DECIMAL}, 
      #{uploadFilesFur,jdbcType=DECIMAL}, #{docReadyFlagFur,jdbcType=DECIMAL}, #{planType,jdbcType=DECIMAL}, 
      #{auditResult,jdbcType=DECIMAL}, #{auditComment,jdbcType=VARCHAR}, #{auditor,jdbcType=VARCHAR}, 
      #{auditorName,jdbcType=VARCHAR}, #{auditTime,jdbcType=TIMESTAMP}, #{financialDate,jdbcType=TIMESTAMP}, 
      #{selfcheckDate,jdbcType=TIMESTAMP}, #{clrq,jdbcType=TIMESTAMP}, #{zs,jdbcType=VARCHAR}, 
      #{jhnd,jdbcType=DECIMAL}, #{lrrq,jdbcType=TIMESTAMP}, #{ztlx,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.kysoft.cpsi.task.entity.Hcrw">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    insert into T_HCRW
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="hcjhId != null">
        HCJH_ID,
      </if>
      <if test="hcdwXydm != null">
        HCDW_XYDM,
      </if>
      <if test="hcdwName != null">
        HCDW_NAME,
      </if>
      <if test="zfryCode1 != null">
        ZFRY_CODE1,
      </if>
      <if test="zfryCode2 != null">
        ZFRY_CODE2,
      </if>
      <if test="rwzt != null">
        RWZT,
      </if>
      <if test="hcfl != null">
        HCFL,
      </if>
      <if test="hcjg != null">
        HCJG,
      </if>
      <if test="hcjieguo != null">
        HCJIEGUO,
      </if>
      <if test="jyzt != null">
        JYZT,
      </if>
      <if test="hcjggsqk != null">
        HCJGGSQK,
      </if>
      <if test="rlr != null">
        RLR,
      </if>
      <if test="rlrq != null">
        RLRQ,
      </if>
      <if test="sjwcrq != null">
        SJWCRQ,
      </if>
      <if test="zfryName1 != null">
        ZFRY_NAME1,
      </if>
      <if test="zfryName2 != null">
        ZFRY_NAME2,
      </if>
      <if test="hcjgmc != null">
        HCJGMC,
      </if>
      <if test="djjgmc != null">
        DJJGMC,
      </if>
      <if test="djjg != null">
        DJJG,
      </if>
      <if test="zzxs != null">
        ZZXS,
      </if>
      <if test="qybm != null">
        QYBM,
      </if>
      <if test="qymc != null">
        QYMC,
      </if>
      <if test="rlrmc != null">
        RLRMC,
      </if>
      <if test="jhwcrq != null">
        JHWCRQ,
      </if>
      <if test="nd != null">
        ND,
      </if>
      <if test="jhmc != null">
        JHMC,
      </if>
      <if test="jhxdrq != null">
        JHXDRQ,
      </if>
      <if test="dataLoaded != null">
        DATA_LOADED,
      </if>
      <if test="nr != null">
        NR,
      </if>
      <if test="uploadFiles != null">
        UPLOAD_FILES,
      </if>
      <if test="jhbh != null">
        JHBH,
      </if>
      <if test="docReadyFlag != null">
        DOC_READY_FLAG,
      </if>
      <if test="reportDocReadyTime != null">
        REPORT_DOC_READY_TIME,
      </if>
      <if test="docReadyReporter != null">
        DOC_READY_REPORTER,
      </if>
      <if test="docReadyReportFlag != null">
        DOC_READY_REPORT_FLAG,
      </if>
      <if test="requiredFiles != null">
        REQUIRED_FILES,
      </if>
      <if test="requiredFilesFur != null">
        REQUIRED_FILES_FUR,
      </if>
      <if test="uploadFilesFur != null">
        UPLOAD_FILES_FUR,
      </if>
      <if test="docReadyFlagFur != null">
        DOC_READY_FLAG_FUR,
      </if>
      <if test="planType != null">
        PLAN_TYPE,
      </if>
      <if test="auditResult != null">
        AUDIT_RESULT,
      </if>
      <if test="auditComment != null">
        AUDIT_COMMENT,
      </if>
      <if test="auditor != null">
        AUDITOR,
      </if>
      <if test="auditorName != null">
        AUDITOR_NAME,
      </if>
      <if test="auditTime != null">
        AUDIT_TIME,
      </if>
      <if test="financialDate != null">
        FINANCIAL_DATE,
      </if>
      <if test="selfcheckDate != null">
        SELFCHECK_DATE,
      </if>
      <if test="clrq != null">
        CLRQ,
      </if>
      <if test="zs != null">
        ZS,
      </if>
      <if test="jhnd != null">
        JHND,
      </if>
      <if test="lrrq != null">
        LRRQ,
      </if>
      <if test="ztlx != null">
        ZTLX,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="hcjhId != null">
        #{hcjhId,jdbcType=VARCHAR},
      </if>
      <if test="hcdwXydm != null">
        #{hcdwXydm,jdbcType=VARCHAR},
      </if>
      <if test="hcdwName != null">
        #{hcdwName,jdbcType=VARCHAR},
      </if>
      <if test="zfryCode1 != null">
        #{zfryCode1,jdbcType=VARCHAR},
      </if>
      <if test="zfryCode2 != null">
        #{zfryCode2,jdbcType=VARCHAR},
      </if>
      <if test="rwzt != null">
        #{rwzt,jdbcType=NUMERIC},
      </if>
      <if test="hcfl != null">
        #{hcfl,jdbcType=NUMERIC},
      </if>
      <if test="hcjg != null">
        #{hcjg,jdbcType=VARCHAR},
      </if>
      <if test="hcjieguo != null">
        #{hcjieguo,jdbcType=NUMERIC},
      </if>
      <if test="jyzt != null">
        #{jyzt,jdbcType=NUMERIC},
      </if>
      <if test="hcjggsqk != null">
        #{hcjggsqk,jdbcType=NUMERIC},
      </if>
      <if test="rlr != null">
        #{rlr,jdbcType=VARCHAR},
      </if>
      <if test="rlrq != null">
        #{rlrq,jdbcType=TIMESTAMP},
      </if>
      <if test="sjwcrq != null">
        #{sjwcrq,jdbcType=TIMESTAMP},
      </if>
      <if test="zfryName1 != null">
        #{zfryName1,jdbcType=VARCHAR},
      </if>
      <if test="zfryName2 != null">
        #{zfryName2,jdbcType=VARCHAR},
      </if>
      <if test="hcjgmc != null">
        #{hcjgmc,jdbcType=VARCHAR},
      </if>
      <if test="djjgmc != null">
        #{djjgmc,jdbcType=VARCHAR},
      </if>
      <if test="djjg != null">
        #{djjg,jdbcType=VARCHAR},
      </if>
      <if test="zzxs != null">
        #{zzxs,jdbcType=NUMERIC},
      </if>
      <if test="qybm != null">
        #{qybm,jdbcType=VARCHAR},
      </if>
      <if test="qymc != null">
        #{qymc,jdbcType=VARCHAR},
      </if>
      <if test="rlrmc != null">
        #{rlrmc,jdbcType=VARCHAR},
      </if>
      <if test="jhwcrq != null">
        #{jhwcrq,jdbcType=TIMESTAMP},
      </if>
      <if test="nd != null">
        #{nd,jdbcType=NUMERIC},
      </if>
      <if test="jhmc != null">
        #{jhmc,jdbcType=VARCHAR},
      </if>
      <if test="jhxdrq != null">
        #{jhxdrq,jdbcType=TIMESTAMP},
      </if>
      <if test="dataLoaded != null">
        #{dataLoaded,jdbcType=DECIMAL},
      </if>
      <if test="nr != null">
        #{nr,jdbcType=NUMERIC},
      </if>
      <if test="uploadFiles != null">
        #{uploadFiles,jdbcType=DECIMAL},
      </if>
      <if test="jhbh != null">
        #{jhbh,jdbcType=VARCHAR},
      </if>
      <if test="docReadyFlag != null">
        #{docReadyFlag,jdbcType=DECIMAL},
      </if>
      <if test="reportDocReadyTime != null">
        #{reportDocReadyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="docReadyReporter != null">
        #{docReadyReporter,jdbcType=VARCHAR},
      </if>
      <if test="docReadyReportFlag != null">
        #{docReadyReportFlag,jdbcType=DECIMAL},
      </if>
      <if test="requiredFiles != null">
        #{requiredFiles,jdbcType=DECIMAL},
      </if>
      <if test="requiredFilesFur != null">
        #{requiredFilesFur,jdbcType=DECIMAL},
      </if>
      <if test="uploadFilesFur != null">
        #{uploadFilesFur,jdbcType=DECIMAL},
      </if>
      <if test="docReadyFlagFur != null">
        #{docReadyFlagFur,jdbcType=DECIMAL},
      </if>
      <if test="planType != null">
        #{planType,jdbcType=DECIMAL},
      </if>
      <if test="auditResult != null">
        #{auditResult,jdbcType=DECIMAL},
      </if>
      <if test="auditComment != null">
        #{auditComment,jdbcType=VARCHAR},
      </if>
      <if test="auditor != null">
        #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="auditorName != null">
        #{auditorName,jdbcType=VARCHAR},
      </if>
      <if test="auditTime != null">
        #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="financialDate != null">
        #{financialDate,jdbcType=TIMESTAMP},
      </if>
      <if test="selfcheckDate != null">
        #{selfcheckDate,jdbcType=TIMESTAMP},
      </if>
      <if test="clrq != null">
        #{clrq,jdbcType=TIMESTAMP},
      </if>
      <if test="zs != null">
        #{zs,jdbcType=VARCHAR},
      </if>
      <if test="jhnd != null">
        #{jhnd,jdbcType=DECIMAL},
      </if>
      <if test="lrrq != null">
        #{lrrq,jdbcType=TIMESTAMP},
      </if>
      <if test="ztlx != null">
        #{ztlx,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.kysoft.cpsi.task.entity.Hcrw">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    update T_HCRW
    <set>
      <if test="hcjhId != null">
        HCJH_ID = #{hcjhId,jdbcType=VARCHAR},
      </if>
      <if test="hcdwXydm != null">
        HCDW_XYDM = #{hcdwXydm,jdbcType=VARCHAR},
      </if>
      <if test="hcdwName != null">
        HCDW_NAME = #{hcdwName,jdbcType=VARCHAR},
      </if>
      <if test="zfryCode1 != null">
        ZFRY_CODE1 = #{zfryCode1,jdbcType=VARCHAR},
      </if>
      <if test="zfryCode2 != null">
        ZFRY_CODE2 = #{zfryCode2,jdbcType=VARCHAR},
      </if>
      <if test="rwzt != null">
        RWZT = #{rwzt,jdbcType=NUMERIC},
      </if>
      <if test="hcfl != null">
        HCFL = #{hcfl,jdbcType=NUMERIC},
      </if>
      <if test="hcjg != null">
        HCJG = #{hcjg,jdbcType=VARCHAR},
      </if>
      <if test="hcjieguo != null">
        HCJIEGUO = #{hcjieguo,jdbcType=NUMERIC},
      </if>
      <if test="jyzt != null">
        JYZT = #{jyzt,jdbcType=NUMERIC},
      </if>
      <if test="hcjggsqk != null">
        HCJGGSQK = #{hcjggsqk,jdbcType=NUMERIC},
      </if>
      <if test="rlr != null">
        RLR = #{rlr,jdbcType=VARCHAR},
      </if>
      <if test="rlrq != null">
        RLRQ = #{rlrq,jdbcType=TIMESTAMP},
      </if>
      <if test="sjwcrq != null">
        SJWCRQ = #{sjwcrq,jdbcType=TIMESTAMP},
      </if>
      <if test="zfryName1 != null">
        ZFRY_NAME1 = #{zfryName1,jdbcType=VARCHAR},
      </if>
      <if test="zfryName2 != null">
        ZFRY_NAME2 = #{zfryName2,jdbcType=VARCHAR},
      </if>
      <if test="hcjgmc != null">
        HCJGMC = #{hcjgmc,jdbcType=VARCHAR},
      </if>
      <if test="djjgmc != null">
        DJJGMC = #{djjgmc,jdbcType=VARCHAR},
      </if>
      <if test="djjg != null">
        DJJG = #{djjg,jdbcType=VARCHAR},
      </if>
      <if test="zzxs != null">
        ZZXS = #{zzxs,jdbcType=NUMERIC},
      </if>
      <if test="qybm != null">
        QYBM = #{qybm,jdbcType=VARCHAR},
      </if>
      <if test="qymc != null">
        QYMC = #{qymc,jdbcType=VARCHAR},
      </if>
      <if test="rlrmc != null">
        RLRMC = #{rlrmc,jdbcType=VARCHAR},
      </if>
      <if test="jhwcrq != null">
        JHWCRQ = #{jhwcrq,jdbcType=TIMESTAMP},
      </if>
      <if test="nd != null">
        ND = #{nd,jdbcType=NUMERIC},
      </if>
      <if test="jhmc != null">
        JHMC = #{jhmc,jdbcType=VARCHAR},
      </if>
      <if test="jhxdrq != null">
        JHXDRQ = #{jhxdrq,jdbcType=TIMESTAMP},
      </if>
      <if test="dataLoaded != null">
        DATA_LOADED = #{dataLoaded,jdbcType=DECIMAL},
      </if>
      <if test="nr != null">
        NR = #{nr,jdbcType=NUMERIC},
      </if>
      <if test="uploadFiles != null">
        UPLOAD_FILES = #{uploadFiles,jdbcType=DECIMAL},
      </if>
      <if test="jhbh != null">
        JHBH = #{jhbh,jdbcType=VARCHAR},
      </if>
      <if test="docReadyFlag != null">
        DOC_READY_FLAG = #{docReadyFlag,jdbcType=DECIMAL},
      </if>
      <if test="reportDocReadyTime != null">
        REPORT_DOC_READY_TIME = #{reportDocReadyTime,jdbcType=TIMESTAMP},
      </if>
      <if test="docReadyReporter != null">
        DOC_READY_REPORTER = #{docReadyReporter,jdbcType=VARCHAR},
      </if>
      <if test="docReadyReportFlag != null">
        DOC_READY_REPORT_FLAG = #{docReadyReportFlag,jdbcType=DECIMAL},
      </if>
      <if test="requiredFiles != null">
        REQUIRED_FILES = #{requiredFiles,jdbcType=DECIMAL},
      </if>
      <if test="requiredFilesFur != null">
        REQUIRED_FILES_FUR = #{requiredFilesFur,jdbcType=DECIMAL},
      </if>
      <if test="uploadFilesFur != null">
        UPLOAD_FILES_FUR = #{uploadFilesFur,jdbcType=DECIMAL},
      </if>
      <if test="docReadyFlagFur != null">
        DOC_READY_FLAG_FUR = #{docReadyFlagFur,jdbcType=DECIMAL},
      </if>
      <if test="planType != null">
        PLAN_TYPE = #{planType,jdbcType=DECIMAL},
      </if>
      <if test="auditResult != null">
        AUDIT_RESULT = #{auditResult,jdbcType=DECIMAL},
      </if>
      <if test="auditComment != null">
        AUDIT_COMMENT = #{auditComment,jdbcType=VARCHAR},
      </if>
      <if test="auditor != null">
        AUDITOR = #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="auditorName != null">
        AUDITOR_NAME = #{auditorName,jdbcType=VARCHAR},
      </if>
      <if test="auditTime != null">
        AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP},
      </if>
      <if test="financialDate != null">
        FINANCIAL_DATE = #{financialDate,jdbcType=TIMESTAMP},
      </if>
      <if test="selfcheckDate != null">
        SELFCHECK_DATE = #{selfcheckDate,jdbcType=TIMESTAMP},
      </if>
      <if test="clrq != null">
        CLRQ = #{clrq,jdbcType=TIMESTAMP},
      </if>
      <if test="zs != null">
        ZS = #{zs,jdbcType=VARCHAR},
      </if>
      <if test="jhnd != null">
        JHND = #{jhnd,jdbcType=DECIMAL},
      </if>
      <if test="lrrq != null">
        LRRQ = #{lrrq,jdbcType=TIMESTAMP},
      </if>
      <if test="ztlx != null">
        ZTLX = #{ztlx,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.kysoft.cpsi.task.entity.Hcrw">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 21 17:27:21 CST 2016.
    -->
    update T_HCRW
    set HCJH_ID = #{hcjhId,jdbcType=VARCHAR},
      HCDW_XYDM = #{hcdwXydm,jdbcType=VARCHAR},
      HCDW_NAME = #{hcdwName,jdbcType=VARCHAR},
      ZFRY_CODE1 = #{zfryCode1,jdbcType=VARCHAR},
      ZFRY_CODE2 = #{zfryCode2,jdbcType=VARCHAR},
      RWZT = #{rwzt,jdbcType=NUMERIC},
      HCFL = #{hcfl,jdbcType=NUMERIC},
      HCJG = #{hcjg,jdbcType=VARCHAR},
      HCJIEGUO = #{hcjieguo,jdbcType=NUMERIC},
      JYZT = #{jyzt,jdbcType=NUMERIC},
      HCJGGSQK = #{hcjggsqk,jdbcType=NUMERIC},
      RLR = #{rlr,jdbcType=VARCHAR},
      RLRQ = #{rlrq,jdbcType=TIMESTAMP},
      SJWCRQ = #{sjwcrq,jdbcType=TIMESTAMP},
      ZFRY_NAME1 = #{zfryName1,jdbcType=VARCHAR},
      ZFRY_NAME2 = #{zfryName2,jdbcType=VARCHAR},
      HCJGMC = #{hcjgmc,jdbcType=VARCHAR},
      DJJGMC = #{djjgmc,jdbcType=VARCHAR},
      DJJG = #{djjg,jdbcType=VARCHAR},
      ZZXS = #{zzxs,jdbcType=NUMERIC},
      QYBM = #{qybm,jdbcType=VARCHAR},
      QYMC = #{qymc,jdbcType=VARCHAR},
      RLRMC = #{rlrmc,jdbcType=VARCHAR},
      JHWCRQ = #{jhwcrq,jdbcType=TIMESTAMP},
      ND = #{nd,jdbcType=NUMERIC},
      JHMC = #{jhmc,jdbcType=VARCHAR},
      JHXDRQ = #{jhxdrq,jdbcType=TIMESTAMP},
      DATA_LOADED = #{dataLoaded,jdbcType=DECIMAL},
      NR = #{nr,jdbcType=NUMERIC},
      UPLOAD_FILES = #{uploadFiles,jdbcType=DECIMAL},
      JHBH = #{jhbh,jdbcType=VARCHAR},
      DOC_READY_FLAG = #{docReadyFlag,jdbcType=DECIMAL},
      REPORT_DOC_READY_TIME = #{reportDocReadyTime,jdbcType=TIMESTAMP},
      DOC_READY_REPORTER = #{docReadyReporter,jdbcType=VARCHAR},
      DOC_READY_REPORT_FLAG = #{docReadyReportFlag,jdbcType=DECIMAL},
      REQUIRED_FILES = #{requiredFiles,jdbcType=DECIMAL},
      REQUIRED_FILES_FUR = #{requiredFilesFur,jdbcType=DECIMAL},
      UPLOAD_FILES_FUR = #{uploadFilesFur,jdbcType=DECIMAL},
      DOC_READY_FLAG_FUR = #{docReadyFlagFur,jdbcType=DECIMAL},
      PLAN_TYPE = #{planType,jdbcType=DECIMAL},
      AUDIT_RESULT = #{auditResult,jdbcType=DECIMAL},
      AUDIT_COMMENT = #{auditComment,jdbcType=VARCHAR},
      AUDITOR = #{auditor,jdbcType=VARCHAR},
      AUDITOR_NAME = #{auditorName,jdbcType=VARCHAR},
      AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP},
      FINANCIAL_DATE = #{financialDate,jdbcType=TIMESTAMP},
      SELFCHECK_DATE = #{selfcheckDate,jdbcType=TIMESTAMP},
      CLRQ = #{clrq,jdbcType=TIMESTAMP},
      ZS = #{zs,jdbcType=VARCHAR},
      JHND = #{jhnd,jdbcType=DECIMAL},
      LRRQ = #{lrrq,jdbcType=TIMESTAMP},
      ZTLX = #{ztlx,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>

    <select id="queryForOrg" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW where HCJH_ID = #{hcjhId}
        AND (
          (DJJG IN (
	    	SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
				SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId})
			CONNECT BY PRIOR ID=PARENT_ID) and (select ext1 from sys_user where user_id=#{_userId})=1)
        or ((zfry_code1= (select zfry from sys_user where user_id=#{_userId}) or zfry_code2= (select zfry from sys_user where user_id=#{_userId})) and (select ext1 from sys_user where user_id=#{_userId})=2)
        )
        AND HCJG like concat(#{organization,jdbcType=VARCHAR}, '%')
      <if test="auditResult !=null ">
         and audit_result is not null
      </if>
      <if test="xydm!=null">
          and hcdw_xydm=#{xydm}
      </if>
      <if test="qymc!=null">
          and HCDW_NAME like concat(concat('%', #{qymc}), '%')
      </if>
       <if test="zfry_name1!=null">
          and zfry_name1 like concat(concat('%', #{zfry_name1}), '%')
          or 
          zfry_name2 like concat(concat('%', #{zfry_name1}), '%')
      </if>
 
      <if test="filterByZfry!=null">
          and (ZFRY_CODE1 =  (select zfry from sys_user where user_id=#{_userId}) OR ZFRY_CODE2 =  (select zfry from sys_user where user_id=#{_userId}))
      </if>
      <if test="filterByAuditResult==2">
      		AND AUDIT_RESULT IS NOT NULL
      </if>
      <if test="filterByAuditResult==3">
      		AND AUDIT_RESULT IS NULL
      </if>
      <if test="sjwcrqNullFlag!=null">
        and sjwcrq is not null
      </if>
      <if test="rwzt!=null">
        and rwzt = #{rwzt}
      </if>
      <if test="hcjieguo!=null and hcjieguo!='' ">
        and hcjieguo = #{hcjieguo}
      </if>

        ORDER BY
        <if test="order == 1">
          hcjieguo desc,hcjg,djjg,hcdw_xydm,HCJGMC, ZFRY_NAME1, ZFRY_NAME2
        </if>
        <if test="order ==2">
          hcjg,djjg,hcdw_xydm,ZZXS, HCJGMC
        </if>
    </select>
    
    <select id="queryForOrg1" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW where HCJH_ID = #{hcjhId}
        AND (
          (DJJG IN (
	    	SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
				SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId})
			CONNECT BY PRIOR ID=PARENT_ID) and (select ext1 from sys_user where user_id=#{_userId})=1)
        or ((zfry_code1=(select zfry from sys_user where user_id=#{_userId}) or zfry_code2=(select zfry from sys_user where user_id=#{_userId})) and (select ext1 from sys_user where user_id=#{_userId})=2)
        )
        AND HCJG like concat(#{organization,jdbcType=VARCHAR}, '%')
      <if test="auditResult !=null ">
         and audit_result is not null
      </if>
      <if test="xydm!=null">
          and hcdw_xydm=#{xydm}
      </if>
      <if test="qymc!=null">
          and HCDW_NAME like concat(concat('%', #{qymc}), '%')
      </if>
       <if test="zfry_name1!=null">
          and zfry_name1 like concat(concat('%', #{zfry_name1}), '%')
      </if>
      <if test="filterByZfry!=null">
          and (ZFRY_CODE1 = (select zfry from sys_user where user_id=#{_userId}) OR ZFRY_CODE2 = (select zfry from sys_user where user_id=#{_userId}))
      </if>
      
        and rlrmc is not null
      
        ORDER BY
        <if test="order == 1">
          hcjg,djjg,hcdw_xydm,HCJGMC, ZFRY_NAME1, ZFRY_NAME2
        </if>
        <if test="order ==2">
          hcjg,djjg,hcdw_xydm,ZZXS, HCJGMC
        </if>
    </select>
    <select id="queryForOrg2" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW where HCJH_ID = #{hcjhId}
        AND (
          (DJJG IN (
	    	SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
				SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId})
			CONNECT BY PRIOR ID=PARENT_ID) and (select ext1 from sys_user where user_id=#{_userId})=1)
        or ((zfry_code1=(select zfry from sys_user where user_id=#{_userId}) or zfry_code2=(select zfry from sys_user where user_id=#{_userId})) and (select ext1 from sys_user where user_id=#{_userId})=2)
        )
        AND HCJG like concat(#{organization,jdbcType=VARCHAR}, '%')
      <if test="auditResult !=null ">
         and audit_result is not null
      </if>
      <if test="xydm!=null">
          and hcdw_xydm=#{xydm}
      </if>
      <if test="qymc!=null">
          and HCDW_NAME like concat(concat('%', #{qymc}), '%')
      </if>
       <if test="zfry_name1!=null">
          and zfry_name1 like concat(concat('%', #{zfry_name1}), '%')
      </if>
      <if test="filterByZfry!=null">
          and (ZFRY_CODE1 = (select zfry from sys_user where user_id=#{_userId}) OR ZFRY_CODE2 = (select zfry from sys_user where user_id=#{_userId}))
      </if>
      
      and rlrmc is  null
      
        ORDER BY
        <if test="order == 1">
          hcjg,djjg,hcdw_xydm,HCJGMC, ZFRY_NAME1, ZFRY_NAME2
        </if>
        <if test="order ==2">
          hcjg,djjg,hcdw_xydm,ZZXS, HCJGMC
        </if>
    </select>
    
    <select id="queryForXydm" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW where hcdw_xydm=#{hcdwXydm}
        ORDER BY JHND DESC,nd
    </select>

    <select id="queryForAuditor1" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW
        where DOC_READY_REPORT_FLAG = 1 AND 
        (
           (ZFRY_CODE1 =  (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}) or ZFRY_CODE2 =  (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}))
           or (DJJG IN ( SELECT ID FROM SYS_ORGANIZATION START WITH ID IN ( SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId,jdbcType=VARCHAR}) CONNECT BY PRIOR ID=PARENT_ID ) and (select ext1 from sys_user where user_id=#{_userId,jdbcType=VARCHAR})=1)
        )
        <if test="planType!=null">
            AND PLAN_TYPE = #{planType}
        </if>
        <if test="nd!=null">
            AND JHND = #{nd}
        </if>
        <if test="hcjhId">
            AND JHBH = #{hcjhId}
        </if>
        <if test="jhmc!=null">
            AND JHMC LIKE concat(concat('%', #{jhmc}), '%')
        </if>
        <if test="hcdwXydm!=null">
            AND HCDW_XYDM = #{hcdwXydm}
        </if>
        <if test="hcdwName!=null">
            AND HCDW_NAME LIKE concat(concat('%', #{hcdwName}), '%')
        </if>
      <if test="rwztWCFlag!=null">
        AND RWZT = #{rwztWCFlag}
      </if>
      <if test="rwztWWCFlag!=null">
        AND (RWZT != 5 or RWZT is null)
      </if>
        AND RLR IS NOT NULL AND RLRQ IS NOT NULL
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
        plan_type desc,jhbh desc,hcdw_xydm
    </select>
    <select id="queryForAuditor2" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW
        where 
         DOC_READY_REPORT_FLAG = 1
        AND DJJG IN (
	    	SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
				SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId,jdbcType=VARCHAR})
			CONNECT BY PRIOR ID=PARENT_ID )
        and((zfry_code1= (select zfry from sys_user where user_id=#{_userId}) or zfry_code2= (select zfry from sys_user where user_id=#{_userId})) and (select ext1 from sys_user where user_id=#{_userId,jdbcType=VARCHAR})=2)
        <if test="planType!=null">
            AND PLAN_TYPE = #{planType}
        </if>
        <if test="nd!=null">
            AND JHND = #{nd}
        </if>
        <if test="hcjhId">
            AND JHBH = #{hcjhId}
        </if>
        <if test="jhmc!=null">
            AND JHMC LIKE concat(concat('%', #{jhmc}), '%')
        </if>
        <if test="hcdwXydm!=null">
            AND HCDW_XYDM = #{hcdwXydm}
        </if>
        <if test="hcdwName!=null">
            AND HCDW_NAME LIKE concat(concat('%', #{hcdwName}), '%')
        </if>
      <if test="rwztWCFlag!=null">
        AND RWZT = #{rwztWCFlag}
      </if>
      <if test="rwztWWCFlag!=null">
        AND (RWZT != 5 or RWZT is null)
      </if>
        AND RLR IS NOT NULL AND RLRQ IS NOT NULL
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
      plan_type desc,jhbh desc,hcdw_xydm
    </select>

	<select id="queryForAuditorM" resultType="java.util.Map">
        SELECT m.*, n.FR,n.ZZXS, n.LLR, n.LXDH, n.HYFL FROM (
        select
        <include refid="Base_Column_List" />,
        (select a.mongo_id from t_hcclmx a,t_hccl b,t_hcjh_hcsx d where a.hccl_id=b.id and a.hcsx_id=d.hcsx_id and c.hcjh_id=d.hcjh_id and a.hcrw_id=c.id and b.dxn_type=1) mongoid_1,
        (select a.mongo_id from t_hcclmx a,t_hccl b,t_hcjh_hcsx d where a.hccl_id=b.id and a.hcsx_id=d.hcsx_id and c.hcjh_id=d.hcjh_id and a.hcrw_id=c.id and b.dxn_type=2) mongoid_2
      from T_HCRW c
        where RLR IS NOT NULL AND RLRQ IS NOT NULL
          AND (
            (ZFRY_CODE1 = (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}) or ZFRY_CODE2 = (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}))
            or  (exists(select 1 from ( SELECT ID FROM SYS_ORGANIZATION  START WITH ID IN ( SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId}) CONNECT BY PRIOR ID=PARENT_ID  ) e where e.id=c.djjg) and (select ext1 from sys_user where user_id=#{_userId})=1)
          )
        <if test="nd!=null">
            AND ND = #{nd}
        </if>
        <if test="hcjhId">
            AND JHBH = #{hcjhId}
        </if>
        <if test="jhmc!=null">
            AND JHMC LIKE concat(concat('%', #{jhmc}), '%')
        </if>
        <if test="xydm">
            AND HCDW_XYDM = #{xydm}
        </if>
        <if test="qymc!=null">
            AND HCDW_NAME LIKE concat(concat('%', #{qymc}), '%')
        </if>
		<if test="docReadyReportFlag!=null">
		  AND DOC_READY_REPORT_FLAG = #{docReadyReportFlag}
		</if>
      <if test="docReadyFlag0!=null">
        AND (DOC_READY_FLAG = 0  or DOC_READY_FLAG is null)
      </if>
      <if test="docReadyFlagNo0!=null">
        AND (DOC_READY_FLAG != 0)
      </if>
         ) m LEFT JOIN
		 t_sczt n ON m.hcdw_xydm = n.xydm
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
        hcdw_xydm
    </select>
	<select id="queryForPlanAndAuditor" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW
        where
      DJJG IN (
	    	SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
				SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId,jdbcType=VARCHAR})
			CONNECT BY PRIOR ID=PARENT_ID )
			AND HCJH_ID = #{hcjhId,jdbcType=VARCHAR}
        	and (zfry_code1=#{zfryCode,jdbcType=VARCHAR} or zfry_code2=#{zfryCode,jdbcType=VARCHAR}) 
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
      plan_type desc,jhbh desc,hcdw_xydm
    </select>
    
    <select id="queryForPlan" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW where HCJH_ID = #{planId,jdbcType=VARCHAR}
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
        RLRQ
    </select>

    <select id="selectCountByPlanId" resultType="java.lang.Integer">
        select COUNT(*) from T_HCRW WHERE hcjh_id = #{planId,jdbcType=VARCHAR}
    </select>
    
    <select id="selectYrlsByPlanId" resultType="java.lang.Integer">
        select COUNT(*) from T_HCRW WHERE hcjh_id = #{planId,jdbcType=VARCHAR} and RLR IS NOT NULL AND rlrq IS NOT NULL
    </select>

  <select id="selectTaskIdByNdAndXydm" resultType="java.lang.String">
    select ID from T_HCRW where HCDW_XYDM = #{xydm}
    <if test="hcjhId != null">
      and hcjh_id=#{hcjhId}
    </if>
    <if test="nd != null">
      and ND = #{nd}
    </if>
  </select>

    <update id="pullData" parameterType="java.util.HashMap" statementType="CALLABLE">
        {
        call prc_import_hc(
        #{hcrwId,mode=IN,jdbcType=VARCHAR}
        )}
    </update>
    <update id="compareData" parameterType="java.util.HashMap" statementType="CALLABLE">
        {
        call prc_bidui_hc(
        #{hcrwId,mode=IN,jdbcType=VARCHAR}
        )}
    </update>

    <update id="updateLoadedByPrimaryKey">
        UPDATE T_HCRW SET DATA_LOADED = 1 where HCJH_ID = #{planId,jdbcType=VARCHAR}
    </update>

    <select id="query" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List" />
        from T_HCRW
        where HCJH_ID = #{planId,jdbcType=VARCHAR}
        <if test="hcjg!=null">
            and hcjg in (select id from sys_organization start with id=#{hcjg} connect by prior id=parent_id)
        </if>
        ORDER BY
        <if test="order != null">
            ${sort} ${order},
        </if>
        RLRQ
    </select>

    <select id="queryTongJiFenXi" resultType="java.util.Map">
        select id,lpad('　',(level-1)*2,'　')||name name,level,
        (select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        ) heji,
        (select sum(case when hcjieguo =1 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        ) sl_1,
        round((select sum(case when hcjieguo =1 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_1,
        (select sum(case when hcjieguo =2 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )sl_2,
        round((select sum(case when hcjieguo =2 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_2,
        (select sum(case when hcjieguo =3 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )sl_3,
        round((select sum(case when hcjieguo =3 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_3,
        (select sum(case when hcjieguo =4 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )sl_4,
        round((select sum(case when hcjieguo =4 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_4,
        (select sum(case when hcjieguo =5 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )sl_5,
        round((select sum(case when hcjieguo =5 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_5,
        (select sum(case when hcjieguo =6 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )sl_6,
        round((select sum(case when hcjieguo =6 then 1 else 0 end) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )/(select count(1) from t_hcrw b,t_sczt c
        where c.xydm=b.HCDW_XYDM and b.hcjg like a.id||'%'
        <if test="nd!=null">
            and b.nd=#{nd}
        </if>
        <if test="jhbh!=null">
            and b.jhbh=#{jhbh}
        </if>
        <if test="ztlx!=null">
            and c.ztlx=#{ztlx}
        </if>
        <if test="hyfl!=null">
            and c.hyfl=#{hyfl}
        </if>
        )*100,2) bz_6
        from (select * from sys_organization start with id in(select org_id from t_user_org where user_id=#{userId}) connect by prior id=parent_id) a
        start with id=#{id} connect by prior id=parent_id
        group by id,name,level
        order by id
    </select>

	<update id="updateAccept">
        UPDATE T_HCRW SET RLR = #{userId}, RLRMC = #{userName}, RLRQ = SYSDATE, RWZT = 2 where ID in (
	    <foreach collection="taskIds" index="index" item="taskId" separator="UNION ALL">
	      select #{taskId} from dual
	    </foreach>)
    </update>
 
	<update id="updateUnAccept">
        UPDATE T_HCRW SET RLR = null, RLRMC = null, RLRQ = null, RWZT = 1 where ID in (
	    <foreach collection="taskIds" index="index" item="taskId" separator="UNION ALL">
	      select #{taskId} from dual
	    </foreach>)
    </update>
	
    
	<update id="updateStatusByPrimaryKey">
        UPDATE T_HCRW SET RWZT = #{statusCode} where ID = #{taskId}
    </update>
        
	<update id="updateDispatchByPlanId">
        UPDATE T_HCRW SET JHXDRQ = SYSDATE, JHWCRQ = (SELECT YQWCSJ FROM T_HCJH WHERE ID=#{hcjhId}) where HCJH_ID = #{hcjhId}
    </update>
    
    <update id="updateDocReadyReportFlag">
    	<if test="docReadyReportFlag==1">
        	UPDATE T_HCRW set DOC_READY_REPORT_FLAG=#{docReadyReportFlag}, REPORT_DOC_READY_TIME=sysdate, DOC_READY_REPORTER=#{userName} WHERE ID=#{hcrwId}
        </if>
        <if test="docReadyReportFlag==0">
        	UPDATE T_HCRW set DOC_READY_REPORT_FLAG=#{docReadyReportFlag}, REPORT_DOC_READY_TIME=null, DOC_READY_REPORTER=null WHERE ID=#{hcrwId}
        </if>
    </update>
    
    <update id="updateRequiredDocByPlanId">
    	UPDATE T_HCRW SET REQUIRED_FILES=
			(SELECT COUNT(ID) FROM t_hccl hccl  WHERE SFBYX=1 AND hcsx_id in (
				SELECT ID FROM t_hcsx hcsx RIGHT JOIN (
				SELECT HCSX_ID, HCJH_ID FROM t_hcjh_hcsx WHERE hcjh_id=#{hcjhId})
				hcjh_hcsx ON hcsx.ID = hcjh_hcsx.Hcsx_Id
			)) WHERE HCJH_ID=#{hcjhId}
    </update>

  <select id="queryForUser1" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from T_HCRW
    where
    <![CDATA[
		        RWZT < 5
		    ]]>
    AND
    (
    (ZFRY_CODE1 =  (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}) or ZFRY_CODE2 =  (select zfry from sys_user where user_id=#{_userId,jdbcType=VARCHAR}))
    or (DJJG IN ( SELECT ID FROM SYS_ORGANIZATION START WITH ID IN ( SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId,jdbcType=VARCHAR}) CONNECT BY PRIOR ID=PARENT_ID ) and (select ext1 from sys_user where user_id=#{_userId,jdbcType=VARCHAR})=1)
    )
    AND RLR IS NOT NULL AND RLRQ IS NOT NULL
    ORDER BY
    <if test="order != null">
      ${sort} ${order},
    </if>
    plan_type desc,jhbh desc,hcdw_xydm
  </select>
  <select id="queryForUser2" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from T_HCRW
    where
    <![CDATA[
	        RWZT < 5
	    ]]>
    AND QYBM IN (
    SELECT ID FROM SYS_ORGANIZATION START WITH ID IN (
    SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId,jdbcType=VARCHAR})
    CONNECT BY PRIOR ID=PARENT_ID )
    and ((zfry_code1= (select zfry from sys_user where user_id=#{_userId}) or zfry_code2= (select zfry from sys_user where user_id=#{_userId})) and (select ext1 from sys_user where user_id=#{_userId,jdbcType=VARCHAR})=2)
    AND RLR IS NOT NULL AND RLRQ IS NOT NULL
    ORDER BY
    <if test="order != null">
      ${sort} ${order},
    </if>
    plan_type desc,jhbh desc,hcdw_xydm
  </select>

    <update id="updateAudit">
        UPDATE T_HCRW set AUDIT_RESULT=#{auditResult},
		AUDIT_COMMENT=#{auditComment},
	    AUDITOR=#{auditor},
	    AUDITOR_NAME=#{auditorName},
	    AUDIT_TIME=SYSDATE,
	    HCJIEGUO=#{hcjieguo} 
	    WHERE ID IN  (
	    <foreach collection="taskIds" index="index" item="taskId" separator="UNION ALL">
	      select #{taskId} from dual
	    </foreach>)
    </update>
    
    <update id="updateCancelAudit">
    
    	UPDATE T_HCRW SET AUDIT_RESULT = null, 
    		AUDIT_COMMENT = null, AUDITOR = null,
    		AUDITOR_NAME = null, AUDIT_TIME = null
    	WHERE ID IN  (
	    <foreach collection="taskIds" index="index" item="taskId" separator="UNION ALL">
	      select #{taskId} from dual
	    </foreach>)
    </update>


  <select id="getHcsxJgData" parameterType="java.util.HashMap" statementType="CALLABLE">
    {call pkg_hc.prc_gethcsxjg(#{hcrwId,mode=IN,jdbcType=VARCHAR},#{resultStr,mode=OUT,jdbcType=VARCHAR})}
  </select>

</mapper>