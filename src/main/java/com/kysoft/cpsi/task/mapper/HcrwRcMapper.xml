<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kysoft.cpsi.task.mapper.HcrwRcMapper">
  <resultMap id="BaseResultMap" type="com.kysoft.cpsi.task.entity.HcrwRc">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 10 10:17:00 CST 2016.
    -->
    <result column="NBXH" jdbcType="VARCHAR" property="nbxh" />
    <result column="ZCH" jdbcType="VARCHAR" property="zch" />
    <result column="QYMC" jdbcType="VARCHAR" property="qymc" />
    <result column="FDDBR" jdbcType="VARCHAR" property="fddbr" />
    <result column="QYLXDL" jdbcType="VARCHAR" property="qylxdl" />
    <result column="DJJG" jdbcType="VARCHAR" property="djjg" />
    <result column="DJJG_MC" jdbcType="VARCHAR" property="djjgMc" />
    <result column="GXDW" jdbcType="VARCHAR" property="gxdw" />
    <result column="GXDW_MC" jdbcType="VARCHAR" property="gxdwMc" />
    <result column="CLRQ" jdbcType="TIMESTAMP" property="clrq" />
    <result column="ZS" jdbcType="VARCHAR" property="zs" />
    <result column="QYZZXS" jdbcType="VARCHAR" property="qyzzxs" />
    <result column="JDJG" jdbcType="VARCHAR" property="jdjg" />
    <result column="JDJG_MC" jdbcType="VARCHAR" property="jdjgMc" />
    <result column="LRRQ" jdbcType="TIMESTAMP" property="lrrq" />
    <result column="LRSY" jdbcType="VARCHAR" property="lrsy" />
  </resultMap>
  
  <sql id="Base_Column_List">
    NBXH, ZCH, QYMC, FDDBR, QYLXDL,
    DJJG, DJJG_MC, GXDW, GXDW_MC, QYZZXS, JDJG, JDJG_MC, LRRQ, LRSY
  </sql>
  <insert id="insert" parameterType="com.kysoft.cpsi.task.entity.HcrwRc">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 10 10:17:00 CST 2016.
    -->
    insert into GOV_NBCC_RC_QY (NBXH, ZCH, QYMC, 
      FDDBR, QYLXDL, DJJG, 
      DJJG_MC, GXDW, GXDW_MC, 
      CLRQ, ZS, QYZZXS, 
      JDJG, JDJG_MC, LRRQ, 
      LRSY)
    values (#{nbxh,jdbcType=VARCHAR}, #{zch,jdbcType=VARCHAR}, #{qymc,jdbcType=VARCHAR}, 
      #{fddbr,jdbcType=VARCHAR}, #{qylxdl,jdbcType=VARCHAR}, #{djjg,jdbcType=VARCHAR}, 
      #{djjgMc,jdbcType=VARCHAR}, #{gxdw,jdbcType=VARCHAR}, #{gxdwMc,jdbcType=VARCHAR}, 
      #{clrq,jdbcType=TIMESTAMP}, #{zs,jdbcType=VARCHAR}, #{qyzzxs,jdbcType=VARCHAR}, 
      #{jdjg,jdbcType=VARCHAR}, #{jdjgMc,jdbcType=VARCHAR}, #{lrrq,jdbcType=TIMESTAMP}, 
      #{lrsy,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.kysoft.cpsi.task.entity.HcrwRc">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 10 10:17:00 CST 2016.
    -->
    insert into GOV_NBCC_RC_QY
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="nbxh != null">
        NBXH,
      </if>
      <if test="zch != null">
        ZCH,
      </if>
      <if test="qymc != null">
        QYMC,
      </if>
      <if test="fddbr != null">
        FDDBR,
      </if>
      <if test="qylxdl != null">
        QYLXDL,
      </if>
      <if test="djjg != null">
        DJJG,
      </if>
      <if test="djjgMc != null">
        DJJG_MC,
      </if>
      <if test="gxdw != null">
        GXDW,
      </if>
      <if test="gxdwMc != null">
        GXDW_MC,
      </if>
      <if test="clrq != null">
        CLRQ,
      </if>
      <if test="zs != null">
        ZS,
      </if>
      <if test="qyzzxs != null">
        QYZZXS,
      </if>
      <if test="jdjg != null">
        JDJG,
      </if>
      <if test="jdjgMc != null">
        JDJG_MC,
      </if>
      <if test="lrrq != null">
        LRRQ,
      </if>
      <if test="lrsy != null">
        LRSY,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="nbxh != null">
        #{nbxh,jdbcType=VARCHAR},
      </if>
      <if test="zch != null">
        #{zch,jdbcType=VARCHAR},
      </if>
      <if test="qymc != null">
        #{qymc,jdbcType=VARCHAR},
      </if>
      <if test="fddbr != null">
        #{fddbr,jdbcType=VARCHAR},
      </if>
      <if test="qylxdl != null">
        #{qylxdl,jdbcType=VARCHAR},
      </if>
      <if test="djjg != null">
        #{djjg,jdbcType=VARCHAR},
      </if>
      <if test="djjgMc != null">
        #{djjgMc,jdbcType=VARCHAR},
      </if>
      <if test="gxdw != null">
        #{gxdw,jdbcType=VARCHAR},
      </if>
      <if test="gxdwMc != null">
        #{gxdwMc,jdbcType=VARCHAR},
      </if>
      <if test="clrq != null">
        #{clrq,jdbcType=TIMESTAMP},
      </if>
      <if test="zs != null">
        #{zs,jdbcType=VARCHAR},
      </if>
      <if test="qyzzxs != null">
        #{qyzzxs,jdbcType=VARCHAR},
      </if>
      <if test="jdjg != null">
        #{jdjg,jdbcType=VARCHAR},
      </if>
      <if test="jdjgMc != null">
        #{jdjgMc,jdbcType=VARCHAR},
      </if>
      <if test="lrrq != null">
        #{lrrq,jdbcType=TIMESTAMP},
      </if>
      <if test="lrsy != null">
        #{lrsy,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <select id="selectExclude" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from GOV_NBCC_RC_QY 
    <where>
      <if test="qymc != null">
        and qymc like concat('%', concat(#{qymc,jdbcType=VARCHAR}, '%'))
      </if>
      <if test="zch != null">
        and zch = #{zch,jdbcType=VARCHAR}
      </if>
      <if test="lrrq_a != null">
	    <![CDATA[
        and lrrq >= to_date(#{lrrq_a,jdbcType=DATE},'yyyy-mm-dd')  
	    ]]>
      </if>
      <if test="lrrq_b != null">
	    <![CDATA[
        and lrrq <= to_date(#{lrrq_b,jdbcType=DATE},'yyyy-mm-dd')
	    ]]>
      </if>
      	and zch not in (SELECT HCDW_XYDM FROM t_hcrw WHERE hcjh_id=#{hcjhId,jdbcType=VARCHAR})
    	AND GXDW IN ( SELECT ID FROM SYS_ORGANIZATION START WITH ID IN ( SELECT ORG_ID FROM T_USER_ORG WHERE USER_ID=#{_userId}) CONNECT BY PRIOR ID=PARENT_ID ) 
    </where>
    ORDER BY QYMC
  </select>
</mapper>